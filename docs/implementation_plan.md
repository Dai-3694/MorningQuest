# ごほうび機能の魅力的なパワーアップ計画

おきた！できた！の後の楽しみを最大化するため、「ランクアップ」「コレクション」「AI称賛」を組み合わせたごほうび体験を実装します。

## ユーザーレビューが必要な事項

> [!IMPORTANT]
> **ランクアップの階層案**
> 10回達成ごとに以下の順番でカードが進化します：
> 1. **ひよこポエム級** (初期)
> 2. **うさぎジャンプ級**
> 3. **ライオンパワー級**
> 4. **おうさまマスター級** (ゴール)
> 各ランクでカードの色やスタンプのデザインが豪華になります。

> [!TIP]
> **AI称賛メッセージ**
> 10回分のログ（実際の経過時間や成功率）をGeminiに渡し、お子様の具体的な成長（例：「着替えが先週より1分早くなったよ！」）を指摘して褒めるようにします。

## 構成変更の概要

### データモデルの拡張
#### [MODIFY] types.ts
- `StampCard` に `rank` (0-3) と `medals` 配列を追加。
- `Medal` インターフェース（id, title, date, comment）を定義。

### ロジックとAI
#### [MODIFY] geminiService.ts
- `generateRewardComment(childName: string, logs: MissionLog[])` 関数を追加。実績データを解析して心のこもった褒め言葉を生成します。

### UIコンポーネント
#### [NEW] RewardView.tsx
- スタンプ10個達成時に自動で開くフルスクリーン画面。
- 派手な演出（紙吹雪など）とともにランクアップとメダル授与を表示。
- AIからのメッセージを特別な手紙のようなデザインで表示。

#### [MODIFY] StampView.tsx
- 獲得したメダルを一覧できる「コレクション図鑑」セクションを追加。
- ランクに応じたカードテーマ（金・銀・虹など）の適用。

#### [MODIFY] RoutineManager.tsx
- 10個目のスタンプが押された際に `RewardView` モードへ遷移するナビゲーションロジックを追加。

## 確認方法

### 自動・手動検証
- テスト用データを使用してスタンプ数10をシミュレートし、`RewardView` が表示されるか確認。
- ランクアップ処理が正常に走り、データが永続化されるか確認。
- AI生成されたコメントが実績に即した内容になっているかプレビュー。
